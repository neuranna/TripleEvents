% calculate fROI overlap EventsRev
addpath('/om5/group/evlab/u/annaiv/scripts');
addpath(genpath('/om/group/evlab/software/spm12'))

main_task = 'EventsOrig_instrsep_2runs';
main_label = 'EventsOrig';
loc_task = 'SWNlocIPS168_3runs';
loc_label = 'lang';

main_fROIname = 'locT_0140_percentile-ROI-level0.1_max_0136_percentile-ROI-level0.1_a2b314f1bf0ae6c42dd4acb137923d73.ROIs.nii';
%loc_fROIname = 'locT_0003_percentile-ROI-level0.1_f2f281a0bb9ffa54f781c09b52273cdf.ROIs.nii';
loc_fROIname = 'locT_0004_percentile-ROI-level0.1_a2b314f1bf0ae6c42dd4acb137923d73.ROIs.nii';

experiment = 'EventsOrig';

experiments=struct(...
    'name', main_task, ...
    'pwd1','/mindhive/evlab/u/Shared/SUBJECTS/',...
    'pwd2_loc', ['firstlevel_' loc_task],...
    'pwd2_main', ['firstlevel_' main_task],...
    'data', {{'040_KAN_langevents_01_PL2017',...
    '057_KAN_langevents_02_PL2017',...
    '059_KAN_langevents_04_PL2017',...
    '056_KAN_langevents_05_PL2017',...
    '067_KAN_langevents_06_PL2017',...
    '068_KAN_langevents_07_PL2017',...
    '019_KAN_langevents_08_PL2017',...
    '070_KAN_langevents_11_PL2017',...
    '087_KAN_langevents_12_PL2017',...
    '078_KAN_langevents_13_PL2017',...
    '089_KAN_langevents_15_PL2017',...
    '076_KAN_langevents_16_PL2017' }});


spmfiles_loc={};
spmfiles_main={};
for nsub=1:length(experiments.data)
    spmfiles_loc{nsub}=fullfile(experiments.pwd1,experiments.data{nsub},experiments.pwd2_loc,loc_fROIname);
    spmfiles_main{nsub}=fullfile(experiments.pwd1,experiments.data{nsub},experiments.pwd2_main,main_fROIname);
end

for nsub=1:length(experiments.data)
    experiments.data{nsub}
    output_file = fullfile(['/om5/group/evlab/u/annaiv/TripleEvents/fROI_Overlap_' experiment],...
        [experiments.data{nsub} '_' main_label '_' loc_label '_' experiment '.csv']);
    calculate_parcel_overlap(spmfiles_loc{nsub}, spmfiles_main{nsub}, output_file);
end